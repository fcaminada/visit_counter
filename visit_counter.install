<?php

/**
 * @file
 * On install initializes visit count for each node.
 */

/**
 * Implements hook_install().
 */
function visit_counter_install() {
  $query = db_select('node', 'n')
    ->fields('n', ['nid'])
    ->execute();

  // Start all existing nodes with 99 visits.
  $nids = $query->fetchCol();
  foreach ($nids as $nid) {
    variable_set('visit_counter_' . $nid, 99);
  }
}
